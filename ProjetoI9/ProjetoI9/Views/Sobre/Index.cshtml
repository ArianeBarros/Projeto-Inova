

<html>
<head>
    <title>Sobre</title>
    <link rel="shortcut icon" href="favicon.ico">
    <link href="~/Content/SobreCSS.css" rel="stylesheet" type="text/css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>
    <script type="text/javascript">

        window.onload = function () {
            document.getElementById("opcoesFotos").innerHTML = " <input id='btnPerfil' type='image' src='~/Imagens/imgPerfil.jpg' onclick='CarregarPerfil()'>";

            var ctx = document.getElementById("canvas").getContext("2d");

            window.myBar = new Chart(ctx, {
                type: 'bar',
                data: data,
                options: options
            });

            CarregarDadosBD();
        }

        var qualId = null;
        var qualImg = null;

        function CarregarDadosBD() {
              //IMAGEM
            qualImg = JSON.stringify("@ViewBag.UsuarioLogado.imagem");

            document.getElementById("opcoesFotos").innerHTML = "<input id=\"btnPerfil\" type=\"image\" src=" + qualImg + " onclick=\"CarregarPerfil()\">";
        }

        var seMostraPerfil = 2;
        function CarregarPerfil() {
            if (seMostraPerfil % 2 == 0) {
                document.getElementById("opcoesFotos").innerHTML = "<input id='btnPerfil' type='image' src=" + qualImg + " onclick='CarregarPerfil()'><div id='divMenuV'><nav id ='menuV'><ul>" +
                    "<br><br><a id ='sairV' href='#'>Sair</a><br><br>" +
                    "<a id ='configV' href='~/Perfil/Index'>Configurar conta</a><br><br><br></ul><nav></div>";
                seMostraPerfil++;
            }
            else {
                document.getElementById("opcoesFotos").innerHTML = " <input id='btnPerfil' type='image' src='~/Imagens/imgPerfil.jpg' onclick='CarregarPerfil()'>";
                seMostraPerfil++;
            }
        }

        //GRÁFICO DE PARETO
        var data = {
            animation: {
                onComplete: function () {
                    var ctx = this.chart.ctx;
                    ctx.textAlign = "center";
                    ctx.textBaseline = "middle";

                    this.chart.config.data.datasets.forEach(function (dataset) {
                        ctx.font = "20px Arial";
                        switch (dataset.type) {
                            case "line":
                                ctx.fillStyle = "Black";
                                dataset.metaData.forEach(function (p) {
                                    ctx.fillText(p._chart.config.data.datasets[p._datasetIndex].data[p._index], p._model.x, p._model.y - 20);
                                });
                                break;
                            case "bar":
                                ctx.fillStyle = "White";
                                dataset.metaData.forEach(function (p) {
                                    ctx.fillText(p._chart.config.data.datasets[p._datasetIndex].data[p._index], p._model.x, p._model.y + 20);
                                });
                                break;
                        }
                    });
                }
            },
            labels: ["Falha de Conexão", "Problemas com localhost", "Dificuldade com ASP", "Problemas com CSS", "Falhas do javascript"],
            datasets: [{
                type: "line",
                label: "Acumulado",
                borderColor: "#1a237e",
                fontSize: 20,
                backgroundColor: "#1a237e",
                pointBorderWidth: 5,
                fill: false,
                data: [34.04, 57.45, 76.60, 89.36, 100.00],
                yAxisID: 'y-axis-2',
                fontSize: 20
            }, {
                type: "bar",
                label: "Erros",
                fontSize: 20,
                borderColor: "#ffab91",
                backgroundColor: "#ffab91",
                data: [16, 11, 9, 6, 5],
                yAxisID: 'y-axis-1',
                fontSize: 20
            }]
        };

        var options = {
            scales: {
                yAxes: [{
                    type: "linear",
                    position: "left",
                    id: "y-axis-1",
                    stacked: true,
                    fontSize: 20,
                    ticks: {
                        suggestedMin: 0
                    },
                    scaleLabel: {
                        display: true,
                        labelString: "Frequência",
                        fontSize: 20
                    }
                }, {
                    type: "linear",
                    position: "right",
                    id: "y-axis-2",
                    ticks: {
                        suggestedMin: 0,
                        callback: function (value) {
                            return value + "%";
                        },
                        fontSize: 20
                    },
                    scaleLabel: {
                        display: true,
                        labelString: "Porcentagem",
                        fontSize: 20
                    }
                }]
            }
        };

        //window.onload = function () {
        //    var ctx = document.getElementById("canvas").getContext("2d");

        //    window.myBar = new Chart(ctx, {
        //        type: 'bar',
        //        data: data,
        //        options: options
        //    });
        //};

    </script>
</head>
<body>
    <header>
        
        <nav id="navHeader">
            <ul>
                <a id="home" href="~/Home/Index">HOME</a>
                <a id="principal" href="~/Principal/Index">PRINCIPAL</a>
                <a id="login" href="~/Login/Index">LOGIN</a>
                <a id="cadastro" href="~/Cadastro/Index">CADASTRE-SE</a>
                <a id="contato" href="~/Contato/Index">CONTATO</a>
                <a id="perfil" href="~/Perfil/Index">PERFIL</a>
            </ul>
        </nav>


        <div id="opcoesFotos">

        </div>


    </header>
  
        <canvas id="canvas"></canvas>

    <img src="~/Imagens/formigaSobre.png" id="imagem">
 </body>
</html>
