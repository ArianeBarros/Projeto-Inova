
@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<html>
<head>
    <title>Perfil</title>
    <link rel="shortcut icon" href="favicon.ico">
    <link href="~/Content/PerfilCSS.css" rel="stylesheet" type="text/css">
    <script type="text/javascript">

        //var carregarPerfil = true;

        var qualImg = null;
        var qualId = null;

        window.onload = function()
        {
            document.getElementById("secEscolherFoto").style.display = "none";
            document.getElementById("escolherNovaFoto").innerHTML = " <input class='btnPerfil' type='image' src='/Imagens/imgPerfil.jpg' onclick='TrocarFoto()'>";

            CarregarDadosBD();
        }

        function CarregarDadosBD()
        {
            var string = window.location.href.substring(36);
            string = string.split("?");
            qualId = string[0];
            string = string[1];
            string = string.split("&");
            var nome = string[0].substring(5);
            qualImg = string[1].substring(7);

            while (nome.indexOf("%20") != -1)
                nome = nome.replace("%20", " ");
            while (qualImg.indexOf("%2F") != -1)
                qualImg = qualImg.replace("%2F", "/");

            alert(qualId);
            alert(nome);
            alert(qualImg);

            document.getElementById("opcoesFotos").innerHTML = "<input id=\"btnPerfil\" type=\"image\" src='" + img + "' onclick=\"CarregarPerfil()\">";
            
            document.getElementById("escolherNovaFoto").innerHTML = " <input class='btnPerfil' type='image' src='" + img + "' onclick='TrocarFoto()'>";
        }

        function TrocarFoto()
        {
            if(window.confirm("Deseja trocar sua foto de perfil?"))
                document.getElementById("secEscolherFoto").style.display = "block";
            else
            {
                document.getElementById("secEscolherFoto").style.display = "none";
                document.getElementById("opcoesFotos").innerHTML = "<input class='btnPerfil' type='image' src='" + qualImg + "' onclick='CarregarPerfil()'>";
            }
        }

        var seMostraPerfil = 2;
        function CarregarPerfil()
        {
            if(seMostraPerfil % 2 == 0)
            {
                document.getElementById("opcoesFotos").innerHTML = "<input id='btnPerfil' type='image' src='" + qualImg + "' onclick='CarregarPerfil()'><div id='divMenuV'><nav id ='menuV'><ul>" +
                                                                "<br><br><a id ='homeV' href='~/Home/Index'>HOME</a><br><br>" +
                                                                "<a id='principalV' href='~/Principal/Index'>PRINCIPAL</a><br><br>" +
                                                                "<a id ='sobreV' href='~/Sobre/Index'>SOBRE</a><br><br>" +
                                                                "<a id ='contatoV' href='~/Contato/Index'>CONTATO</a><br><br><br></ul><nav></div>";
                seMostraPerfil++;
            }
            else
            {
                document.getElementById("opcoesFotos").innerHTML = " <input id='btnPerfil' type='image' src='/Imagens/imgPerfil.jpg' onclick='CarregarPerfil()'>";
                seMostraPerfil++;
            }
        }

        function CarregarArquivoEscolhido()  //é esse aqui
        {
            var input = document.getElementById("arquivoEscolhido");

            var foto = input.files[0].name;

            input.addEventListener("change", function(){
            if(input.files.length > 0) nome = input.files[0].name;
            input.innerHTML = ""; });

            document.getElementById("opcoesFotos").innerHTML = " <input class='btnPerfil' type='image' src='/Imagens/" + foto + "' onclick='CarregarPerfil()'>";
            document.getElementById("escolherNovaFoto").innerHTML = " <input class='btnPerfil' type='image' src='/Imagens/" + foto + "' onclick='TrocarFoto()'>";

            document.getElementById("secEscolherFoto").style.display = "none";
            
        }

        function CarregarFotoEscolhida(a)
        {
            alert(a + "");
            document.getElementById("opcoesFotos").innerHTML = "<input class='btnPerfil' type='image' src='" + a + "' onclick='CarregarPerfil()'>";
            document.getElementById("escolherNovaFoto").innerHTML = " <input class='btnPerfil' type='image' src='" + a + "' onclick='TrocarFoto()'>";

            document.getElementById("secEscolherFoto").style.display = "none";
            
        }

    </script>
</head>
<body>
    <header>
        <nav id="navHeader">
            <ul>
                <a id="home" href="~/Home/Index">HOME</a>
                <a id="principal" href="~/Principal/Index">PRINCIPAL</a>
                <a id="sobre" href="~/Sobre/Index">SOBRE</a>
                <a id="contato" href="~/Contato/Index">CONTATO</a>
            </ul>
        </nav>

        <div id="opcoesFotos">

        </div>

    </header>

    <form id="form" method="post" action="SalvarDados(qualImg, qualId)">

        <section id="secEscolherFoto">
            Escolha uma foto para o seu Perfil!
            <br><br>

            <img class="exImg" src="~/Imagens/paisagem1.jpg" onclick="CarregarFotoEscolhida(this.src)">
            <img class="exImg" src="~/Imagens/paisagem2.jpg" onclick="CarregarFotoEscolhida(this.src)">
            <img class="exImg" src="~/Imagens/paisagem3.jpg" onclick="CarregarFotoEscolhida(this.src)">
            <img class="exImg" src="~/Imagens/paisagem4.jpg" onclick="CarregarFotoEscolhida(this.src)">
            <img class="exImg" src="~/Imagens/paisagem5.jpg" onclick="CarregarFotoEscolhida(this.src)">
            <img class="exImg" src="~/Imagens/paisagem6.jpg" onclick="CarregarFotoEscolhida(this.src)">

            <br><br>
            <label for="arquivoEscolhido">Selecionar arquivo da foto</label>
            <input type="file" accept="image/*" onchange="CarregarArquivoEscolhido()" id="arquivoEscolhido" style="display: none">
            <br><br>
        </section>

        <section id="loginSection">
            <br><br>
            <div id="escolherNovaFoto">

            </div>

            <h1>Seus dados:</h1>
            <button id="btnAlterar" onclick="Alterar()">Alterar dados</button>

            <div>
                <label class="login" for="username2">Username: </label>
                <input class="loginInput" id="username2" type="text" required pattern=".{6,15}" title="De 6 a 10 caracteres" name="nomeUsuario">
            </div><br><br>

            <div>
                <label class="login" for="email">Email: </label>
                <input class="loginInput" id="email" type="email" required name="email">
            </div><br><br>


            <div>
                <label class="login" for="aniversario">Data Nascimento: </label>
                <input class="loginInput" type="date" id="data" name="dataAniversario" class="datepicker" pattern="^\d{2}/\d{2}/\d{4}$" required>
            </div><br><br>

            <button class="cBtn" id="btnSalvar" type="submit">Salvar dados</button>
        </section>
    </form>


    <footer>
        <h1 class="fot1">inovaAgora@gmail.com </h1>
        <h1 class="fot1">i9@hotmail.com </h1>
        <h1 class="fot2">(19)3336-5487 </h1>
        <h1 class="fot2">(19)5135-9804 </h1>
    </footer>

</body>
</html>
